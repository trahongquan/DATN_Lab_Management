<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thyme leaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê·∫∑t l·ªãch ph√≤ng th√≠ nghi·ªám</title>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" ></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" ></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" ></script>
    <!--<script src="https://cdn.jsdelivr.net/momentjs/2.29.1/moment.min.js"></script>-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" >
    <link rel="stylesheet" href="/css/base2.min.css" type="text/css">
    <link rel="stylesheet" href="/css/styles.css" type="text/css">
</head>
<body>
<div th:replace="headernew::header"></div>
<main>
    <div>
        <!--Kh√¥ng s·ª≠ d·ª•ng container cho kh√¥ng gian r·ªông h∆°n-->
    <!--<div class="container">-->
        <div class="row">
            <div class="col-12">
                <form action="#" >
                    <div class="form-group choose-datetime">
                        <!--<div class="form-control div-icon div-icon-pre" id="div-icon-pre" style="margin: auto; cursor: pointer">
                            <i class="fa fa-angle-double-left"></i>
                        </div>-->
                        <div class="form-control" id="div-icon-home" style="margin: auto;cursor: pointer">
                            <i class="fa fa-calendar"></i>
                        </div>
                        <label for="date" style="color: black; padding: 10px; font-weight: bold;font-size: 2em;">Ch·ªçn ng√†y:</label>
                        <input type="date" id="date" class="form-control" style="max-width: 20em">
                        <div class="form-control div-icon div-icon-next" style="margin: auto; cursor: pointer">
                            <i class="fa fa-angle-double-right "></i>
                        </div>
                    </div>
                    <div class="alert bg-danger-subtle" id="next-day">
                        <div style="margin: auto" class="alert bg-danger-subtle">
                            <span class="text-status text-danger-emphasis" >M·ªùi ch·ªçn t·ª´ ng√†y ti·∫øp theo</span>
                        </div>
                    </div>
                    <!--<button type="submit" class="btn btn-primary">ƒê·∫∑t l·ªãch</button>-->
                    <div class="choose-room d-flex justify-content-around align-content-center">
                        <div class="col-2 room" th:each="lab : ${labDTOS}" style="border-radius:1em 1em 65px 65px">
                            <div class="card lab-card" style="border-radius:50px" >
                                <div class="header-item">
                                    <div class="card-header justify-content-center" th:text="${lab.getLabName}"></div>
                                    <div>
                                        <button th:data="${lab.getId}" type="button" class="btn btn-success btn-booking" style="border: black thin;">ƒê·∫∑t ph√≤ng</button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div>
                                        <span class="lab-info " th:text="${lab.managingUnit}"> </span>
                                    </div>
                                    <div>
                                        <span class="lab-info text-primary"> Ng∆∞·ªùi ph·ª• tr√°ch: </span>
                                    </div>
                                    <div>
                                        <span class="lab-info" th:text="${lab.getLab_managemet.getRank + ' ' + lab.getLab_managemet.getName}"></span>
                                    </div>
                                    <br>
                                    <div>
                                        <span class="lab-info text-primary">Li√™n h·ªá:</span>
                                        <span class="lab-info" th:text="${lab.getLab_managemet.getContact}"></span>
                                    </div>
                                    <br>
                                    <div>
                                        <style>
                                            .alert{color: black; font-weight: bold; display: none; cursor: pointer} .text-status{color: white}
                                        </style>
                                        <div class="alert bg-yellow" th:value="${lab.getId}" role="alert">
                                            <span>üïì</span>
                                            <span class="text-status">ƒêang ch·ªù duy·ªát</span>
                                        </div>
                                        <div class="alert bg-green" th:value="${lab.getId}" role="alert">
                                            <span class="lnr-checkmark-circle"></span>
                                            <span class="text-status">ƒê√£ ƒë∆∞·ª£c ƒë·∫∑t</span>
                                        </div>
                                        <div class="alert bg-danger" th:value="${lab.getId}" role="alert">
                                            <span class="fa">‚ùå</span>
                                            <span class="text-status">B·ªã t·ª´ ch·ªëi</span>
                                        </div>
                                        <div class="alert bg-primary" th:value="${lab.getId}" role="alert">
                                            <span class="fa fa-plus-circle"></span>
                                            <span class="text-status">Ch·ªçn ngay</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

</main>
<br>
<br>
<script th:inline="javascript">
    $(document).ready(function() {
        var authority = [[${#authentication.authorities}]][0].authority;
        console.log(authority[0].authority)
        var username = [[${#authentication.name}]];
        // if(authority === 'ROLE_ADMIN' || authority === 'ROLE_MANAGER'){
        //     window.location.href = "/Lab/admin/Dashboard?username="+username;
        // }
        var dateAndStatusLabsList = [[${dateAndStatusLabsList}]];
        var currentDate = [[${currentDate}]];
        setIndex(username,dateAndStatusLabsList, currentDate);
        Setday($('#next-day'), currentDate, true);

        checkdateForDivPre(currentDate);
        // Setday($('.div-icon-next'), $("#date").val(), true);
        // Setday($('.div-icon-pre'), $("#date").val(), false);
        /**
         * ƒë·∫∑t $('.alert-link').click ·ªü sau setIndex th√¨ m·ªõi ch·∫°y
         * */
        $('.alert-link').click(function () {
            var dateValue = $("#date").val();
            var labId = $(this).attr('value');
            window.location.href = "/Lab/LabDetail/" + labId + "?date=" + (dateValue) + "&username=" + encodeURIComponent(username);
        });
    });
</script>
<script src="/js/index.js"></script>
</body>
</html>

